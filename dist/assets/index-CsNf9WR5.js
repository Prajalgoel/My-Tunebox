(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const c of e)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&t(p)}).observe(document,{childList:!0,subtree:!0});function u(e){const c={};return e.integrity&&(c.integrity=e.integrity),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?c.credentials="include":e.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(e){if(e.ep)return;e.ep=!0;const c=u(e);fetch(e.href,c)}})();let o={},f,d,v,b,n,r=null,q=function(){};document.querySelector(".popularSongsHeadingLeftArrow").addEventListener("click",()=>{document.querySelector("#PopularSongs").scrollLeft-=300});document.querySelector(".popularSongsHeadingRightArrow").addEventListener("click",()=>{document.querySelector("#PopularSongs").scrollLeft+=300});document.querySelector(".popularArtistsHeadingLeftArrow").addEventListener("click",()=>{document.querySelector("#popularArtistsCards").scrollLeft-=300});document.querySelector(".popularArtistsHeadingRightArrow").addEventListener("click",()=>{document.querySelector("#popularArtistsCards").scrollLeft+=300});document.querySelector("#seekbarPlayPause").addEventListener("click",()=>{r.paused?(r.play(),document.querySelector("#seekbarPlayPause").src="svg/pause.svg",n.querySelector(".playPause").src="svg/pause.svg"):(r.pause(),document.querySelector("#seekbarPlayPause").src="svg/play.svg",n.querySelector(".playPause").src="svg/play.svg")});let x=function(l){let s=Math.floor(l/60),u=Math.floor(l%60);return`${s}:${u.toString().padStart(2,"0")}`};document.addEventListener("keydown",l=>{l.code==="Space"&&(l.preventDefault(),r.paused?(r.play(),seekbarPlayPause.src="svg/pause.svg",n.querySelector(".playPause").src="svg/pause.svg"):(r.pause(),seekbarPlayPause.src="svg/play.svg",n.querySelector(".playPause").src="svg/play.svg"))});document.querySelector("#loop").addEventListener("click",()=>{document.querySelector("#loop").src.endsWith("svg/loop.svg")?(r.loop=!0,document.querySelector("#loop").src="svg/noLoop.svg"):(r.loop=!1,document.querySelector("#loop").src="svg/loop.svg")});let A=document.querySelector(".seekBar"),k=document.querySelector(".seekBarCircle");A.addEventListener("click",l=>{if(r){let s=l.offsetX/l.target.getBoundingClientRect().width*100;k.style.left=s+"%",r.currentTime=r.duration*s/100}});let h=document.querySelector(".volumeBtn"),H=document.querySelector(".volumnSeekbar"),E=document.querySelector(".volumeSeekbarCircle");h.addEventListener("click",()=>{r&&(h.src.endsWith("svg/volumn.svg")?(r.volume=0,h.src="svg/mute.svg",E.style.left="0%"):(r.volume=1,h.src="svg/volumn.svg",E.style.left="100%"))});H.addEventListener("click",l=>{if(r){let s=l.offsetX/l.target.getBoundingClientRect().width*100;s==0?h.src="svg/mute.svg":h.src="svg/volumn.svg",E.style.left=s+"%",r.volume=s/100}});let T=function(){r&&n.nextElementSibling&&(document.querySelectorAll(".playPause").forEach(l=>{l.src="svg/play.svg"}),document.querySelectorAll(".songName").forEach(l=>{l.style.color="white"}),d=n.nextElementSibling.id,v=o[f].songs.find(l=>l.id==d),n=n.nextElementSibling,b=o[f].songs.find(l=>l.id==d).songLink,q())};document.querySelector("#next").addEventListener("click",l=>{T()});document.querySelector("#previous").addEventListener("click",l=>{r&&n.previousElementSibling&&(document.querySelectorAll(".playPause").forEach(s=>{s.src="svg/play.svg"}),document.querySelectorAll(".songName").forEach(s=>{s.style.color="white"}),d=n.previousElementSibling.id,v=o[f].songs.find(s=>s.id==d),n=n.previousElementSibling,b=o[f].songs.find(s=>s.id==d).songLink,q())});document.querySelector(".lib-heading").addEventListener("click",l=>{document.querySelector(".libPlaylistHeadingArrowBtn").src.endsWith("svg/downArrow.svg")?(document.querySelector(".libPlaylistHeadingArrowBtn").src="svg/upArrow.svg",document.querySelector("#LibrarySongs").classList.remove("library-collapsed"),document.querySelector("#LibrarySongs").classList.add("library-expanded")):(document.querySelector(".libPlaylistHeadingArrowBtn").src="svg/downArrow.svg",document.querySelector("#LibrarySongs").classList.remove("library-expanded"),document.querySelector("#LibrarySongs").classList.add("library-collapsed"))});let w=[];async function M(){let s=await(await fetch("http://127.0.0.1:3000/songs/")).text();console.log(s);let u=document.createElement("div");u.innerHTML=s;let t=u.querySelectorAll("a");console.log(t);for(let e=0;e<t.length;e++){const c=t[e];t[e].href.includes("songs")&&w.push(c)}for(const e of w){async function c(){if(e.href.includes("Library")){o.LibrarySongs={};let L=await(await fetch(e.href)).text(),S=document.createElement("div");S.innerHTML=L;let m=S.querySelectorAll("a"),y=[];for(let g=0;g<m.length;g++){let a={};const i=m[g];i.href.includes(".mp3")&&(a.name=i.innerHTML.split("-")[0].trim(),a.artist=i.innerHTML.split("-")[1].replace(".mp3","").trim(),a.songLink=i.href,a.songThumnail=`http://127.0.0.1:3000/songs Thumbnail/LibraryThumbnail/${a.name} - ${a.artist}.jpg`,a.state=!1,y.push(a))}o.LibrarySongs.songs=y}else if(e.href.includes("Popular%20Songs")){o.PopularSongs={};let L=await(await fetch(e.href)).text(),S=document.createElement("div");S.innerHTML=L;let m=S.querySelectorAll("a"),y=[];for(let g=0;g<m.length;g++){let a={};const i=m[g];i.href.includes(".mp3")&&(a.name=i.innerHTML.split("-")[0].trim(),a.artist=i.innerHTML.split("-")[1].replace(".mp3","").trim(),a.songLink=i.href,a.songThumnail=`http://127.0.0.1:3000/songs Thumbnail/Popular SongsThumbnail/${a.name} - ${a.artist}.jpg`,a.state=!1,y.push(a))}o.PopularSongs.songs=y}else{let p=e.innerHTML.replace("/","");o[p]={};let S=await(await fetch(e.href)).text(),m=document.createElement("div");m.innerHTML=S;let y=m.querySelectorAll("a"),g=[];for(let a=0;a<y.length;a++){let i={};const P=y[a];P.href.includes(".mp3")&&(i.name=P.innerHTML.split("-")[0].trim(),i.songLink=P.href,i.songThumnail=`http://127.0.0.1:3000/songs Thumbnail/${i.artist}Thumbnail/${i.name} - ${i.artist}.jpg`,i.state=!1,g.push(i))}o[p].songs=g,o[p].photo=`http://127.0.0.1:3000/ArtistPhotos/${e.innerHTML.replace("/","")}.jpg`}}await c()}}M().then(()=>{console.log("folder links are",w);let l=1;for(const s in o)o[s].songs.forEach(u=>{u.id=l,l++});console.log("allsongDetails are",o),console.table(o),$(),B()});function $(){document.querySelector("#LibrarySongs").innerHTML="",document.querySelector("#PopularSongs").innerHTML="",document.querySelector("#popularArtistsCards").innerHTML="";let l=1,s=o.LibrarySongs.songs;console.table("LibrarySongs are",s),document.querySelector(".NoOfLibSongs").innerHTML=`${o.LibrarySongs.songs.length} songs`,s.forEach(t=>{let e=document.createElement("li");e.className="librarySong song flex items-center gap-3 cursor-pointer hover:scale-105 hover:ease-in hover:duration-100 pb-2",e.id=t.id,e.innerHTML=`
        <span class="font-bold text-lg">${l}</span>
    
        <div class="songPhoto w-[50px] h-[50px]">
           <img src="${t.songThumnail}" alt="" width="50px" class="rounded-md object-cover w-full h-full">
         </div>
    
        <div class="songDetails">
            <div class="songName font-bold text-lg">${t.name}</div>
            <div class="songArtist">${t.artist}</div>
        </div>
    
        <img src="svg/play.svg" alt="" class="playPause p-2 bg-white rounded-full play ml-auto pr-2 ">
        `,l++,document.querySelector("#LibrarySongs").appendChild(e)});let u=o.PopularSongs.songs;console.table("popularSongs are",u),u.forEach(t=>{let e=document.createElement("li");e.className="card song hover:bg-[#1e1d1d] ease-linear duration-100 min-w-[160px] rounded-lg p-3 cursor-pointer ",e.id=t.id,e.innerHTML=`<div class="imageBox relative  mb-2">
                                <div
                                    class="playBox bg-green-500 w-fit rounded-full p-3 absolute top-[95px] right-3 opacity-0">
                                    <img class = "playPause" src="svg/play.svg" alt="">
                                </div>

                                <img src="${t.songThumnail}" alt=""
                                    class="rounded-full w-[145px] h-[145px] ">
                            </div>
                            <div class="songName text-base font-normal hover:underline text-center">
                                ${t.name}
                            </div>
                            <div class="profession text-[#b3b3b3] text-base font-normal text-center">
                                ${t.artist}
                            </div>`,l++,document.querySelector("#PopularSongs").appendChild(e)});for(const t in o)if(t!="LibrarySongs"&&t!="PopularSongs"){let e=document.createElement("li");e.id=t,e.className="card album hover:bg-[#1e1d1d] ease-linear duration-100 min-w-[160px] rounded-lg p-3 cursor-pointer ",e.innerHTML=`<div class="imageBox relative  mb-2">
                                <div
                                    class="playBox bg-green-500 w-fit rounded-full p-3 absolute top-[95px] right-3 opacity-0">
                                    <img class = "playPause" src="svg/play.svg" alt="">
                                </div>

                                <img src = "${o[t].photo}" alt=""
                                    class="rounded-full w-[145px] h-[145px] object-cover">
                            </div>
                            <div class="name text-base font-normal text-center hover:underline ">
                                ${t}
                            </div>
                            <div class="name text-sm font-normal text-center hover:underline ">
                                ${o[t].songs.length} songs
                            </div>
                            `,l++,document.querySelector("#popularArtistsCards").appendChild(e)}}function B(){document.querySelectorAll(".playlist").forEach(l=>{l.addEventListener("click",s=>{if(!s.target.closest("li")||r&&s.target.closest("li").id==d)return;f=l.id,d=s.target.closest("li").id,v=o[f].songs.find(t=>t.id==d),n=s.target.closest("li"),b=o[f].songs.find(t=>t.id==d).songLink,console.log(f),console.log(d),console.log(v),console.log(n);let u=t=>{n.querySelector(".playPause").src.endsWith("svg/pause.svg")?(r.pause(),n.querySelector(".playPause").src="svg/play.svg",seekbarPlayPause.src="svg/play.svg"):(r.play(),n.querySelector(".playPause").src="svg/pause.svg",seekbarPlayPause.src="svg/pause.svg")};q=function(){document.querySelectorAll(".playPause").forEach(t=>{t.src="svg/play.svg"}),document.querySelectorAll(".songName").forEach(t=>{t.style.color="white"}),document.querySelectorAll(".card").forEach(t=>{t.classList.remove("playing")});for(const t in o)o[t].songs.forEach(e=>{e.state=!1});n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),r&&(r.pause(),r.currentTime=0),v.state=!0,r=new Audio(b),r.play(),n.querySelector(".playPause").src="svg/pause.svg",n.querySelector(".songName").style.color="yellow",n.classList.add("playing"),seekbarPlayPause.src="svg/pause.svg",n.removeEventListener("click",u),n.addEventListener("click",u),r.addEventListener("loadedmetadata",()=>{document.querySelector(".duration").innerHTML=x(r.duration)}),r.addEventListener("timeupdate",()=>{document.querySelector(".currentTime").innerHTML=x(r.currentTime),k.style.left=r.currentTime/r.duration*100+"%"}),r.addEventListener("play",()=>{document.querySelectorAll(".wave").forEach(t=>{t.classList.add("active")})}),r.addEventListener("pause",()=>{document.querySelectorAll(".wave").forEach(t=>{t.classList.remove("active")})}),document.querySelector(".playBarLeftSongPhoto").src=v.songThumnail,document.querySelector(".playBArLeftSongName").innerHTML=v.name,document.querySelector(".playBArLeftSongArtist").innerHTML=v.artist,r.addEventListener("timeupdate",()=>{r.duration===r.currentTime&&document.querySelector("#loop").src.endsWith("svg/loop.svg")&&T()})},q()})})}
